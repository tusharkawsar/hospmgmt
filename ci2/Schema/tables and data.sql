DROP TABLE DOCPRESCRIBES;
DROP TABLE PDHISTORY;
DROP TABLE PDAPPOINT;
DROP TABLE PATIENTBED;
DROP TABLE PATIENT;
DROP TABLE BED;
DROP TABLE DOCSCHEDULE;
DROP TABLE NURSESCHEDULE;
DROP TABLE WARD;
DROP TABLE DOCTOR;
DROP TABLE PRES;
DROP TABLE MEDICINE;
DROP TABLE NURSE;
DROP TABLE EMPSCHEDULE;
DROP TABLE EMP;
DROP TABLE WORKPLACE;
DROP TABLE BLOCK;
DROP TABLE LOGIN;



CREATE TABLE PATIENT
(
	PID CHAR(4) CONSTRAINT PK_PATIENT PRIMARY KEY,
	NAME VARCHAR2(20),
	ADDRESS VARCHAR2(50),
	AGE NUMBER(3),
	PHONE VARCHAR2(15),
	BLOOD_GROUP CHAR(5),
	STATUS CHAR(10),
	EMAIL VARCHAR2(30),
	PTYPE CHAR(10)
);
INSERT INTO PATIENT VALUES('P001', 'PATIENT 1', 'ELEPHANT ROAD', 31, '01682980422', 'A+VE', 'CURRENT', 'A@A.COM', 'INDOOR');
INSERT INTO PATIENT VALUES('P002', 'PATIENT 2', 'ELEPHANT ROAD', 25, '01682980422', 'B+VE', 'CURRENT', 'A@A.COM', 'INDOOR');
INSERT INTO PATIENT VALUES('P003', 'PATIENT 3', 'ELEPHANT ROAD', 18, '01682980422', 'O+VE', 'FORMER', 'A@A.COM', 'OUTDOOR');
INSERT INTO PATIENT VALUES('P004', 'PATIENT 4', 'ELEPHANT ROAD', 65, '01682980422', 'AB+VE', 'CURRENT', 'A@A.COM', 'INDOOR');
INSERT INTO PATIENT VALUES('P005', 'PATIENT 5', 'ELEPHANT ROAD', 2, '01682980422', 'O-VE', 'CURRENT', 'A@A.COM', 'INDOOR');
INSERT INTO PATIENT VALUES('P006', 'PATIENT 5', 'ELEPHANT ROAD', 2, '01682980422', 'O-VE', 'CURRENT', 'A@A.COM', 'INDOOR');
INSERT INTO PATIENT VALUES('P007', 'PATIENT 5', 'ELEPHANT ROAD', 2, '01682980422', 'A+VE', 'CURRENT', 'A@A.COM', 'INDOOR');


CREATE TABLE DOCTOR
(
	DID CHAR(4) CONSTRAINT PK_DOCTOR PRIMARY KEY,
	NAME VARCHAR2(20),
	ADDRESS VARCHAR2(50),
	PHONE VARCHAR2(15),
	AGE NUMBER(3),
	STATUS CHAR(10),
	EMAIL VARCHAR2(30),
	QUALIFICATION VARCHAR2(50),
	SPECIALIZATION VARCHAR2(50),
	SALARY NUMBER(8, 2)
);
INSERT INTO DOCTOR VALUES('D001', 'DOCTOR 1', 'ELEPHANT ROAD', '01682980423', 31, 'CURRENT', 'A@A.COM', 'MBBS', 'HEART', 20000);
INSERT INTO DOCTOR VALUES('D002', 'DOCTOR 2', 'ELEPHANT ROAD', '01682980424', 31, 'CURRENT', 'A@A.COM', 'MBBS', 'KIDNEY', 20000);
INSERT INTO DOCTOR VALUES('D003', 'DOCTOR 3', 'ELEPHANT ROAD', '01682980425', 31, 'CURRENT', 'A@A.COM', 'MBBS', 'LUNGS', 20000);
INSERT INTO DOCTOR VALUES('D004', 'DOCTOR 4', 'ELEPHANT ROAD', '01682980426', 31, 'CURRENT', 'A@A.COM', 'MBBS', 'CHILD', 20000);
INSERT INTO DOCTOR VALUES('D005', 'DOCTOR 5', 'ELEPHANT ROAD', '01682980427', 31, 'FORMER', 'A@A.COM', 'MBBS', 'SKIN', NULL);



CREATE TABLE PDHISTORY
(
	SUMMARY VARCHAR2(200),
	PID CHAR(4),
	DID CHAR(4),
	STARTDATE DATE,
	ENDDATE DATE
);
ALTER TABLE PDHISTORY ADD CONSTRAINT FK1_PDHISTORY FOREIGN KEY(PID) REFERENCES PATIENT(PID) ON DELETE SET NULL;
ALTER TABLE PDHISTORY ADD CONSTRAINT FK2_PDHISTORY FOREIGN KEY(DID) REFERENCES DOCTOR(DID) ON DELETE SET NULL;
ALTER TABLE PDHISTORY ADD CONSTRAINT PK_PDHISTORY PRIMARY KEY(PID, DID, STARTDATE);

INSERT INTO PDHISTORY(PID, DID, STARTDATE, ENDDATE) VALUES('P001', 'D001', '16-MAR-2014', NULL);
INSERT INTO PDHISTORY(PID, DID, STARTDATE, ENDDATE) VALUES('P001', 'D001', '06-MAR-2013', '26-MAR-2013');
INSERT INTO PDHISTORY(PID, DID, STARTDATE, ENDDATE) VALUES('P001', 'D002', '16-MAR-2004', NULL);
INSERT INTO PDHISTORY(PID, DID, STARTDATE, ENDDATE) VALUES('P002', 'D002', '16-MAR-1994', NULL);
INSERT INTO PDHISTORY(PID, DID, STARTDATE, ENDDATE) VALUES('P003', 'D003', '16-JAN-2014', '16-JAN-2014');
INSERT INTO PDHISTORY(PID, DID, STARTDATE, ENDDATE) VALUES('P004', 'D003', '16-JAN-2014', NULL);
INSERT INTO PDHISTORY(PID, DID, STARTDATE, ENDDATE) VALUES('P005', 'D004', '16-JAN-2014', '16-JAN-2014');
INSERT INTO PDHISTORY(PID, DID, STARTDATE, ENDDATE) VALUES('P005', 'D005', '01-JAN-2014', '21-JAN-2014');

/* ****************************************** TABLE FOR FUTURE APPOINTMENTS ************************************* */



CREATE TABLE PDAPPOINT
(
	PID CHAR(4),
	DID CHAR(4),
	APPOINTDATE DATE
);
ALTER TABLE PDAPPOINT ADD CONSTRAINT FK1_PDAPPOINT FOREIGN KEY(PID) REFERENCES PATIENT(PID) ON DELETE SET NULL;
ALTER TABLE PDAPPOINT ADD CONSTRAINT FK2_PDAPPOINT FOREIGN KEY(DID) REFERENCES DOCTOR(DID) ON DELETE SET NULL;
ALTER TABLE PDAPPOINT ADD CONSTRAINT PK_PDAPPOINT PRIMARY KEY(PID, DID, APPOINTDATE);

INSERT INTO PDAPPOINT VALUES('P001', 'D001', '01-APR-2014');
INSERT INTO PDAPPOINT VALUES('P001', 'D002', '01-APR-2014');
INSERT INTO PDAPPOINT VALUES('P002', 'D002', '01-APR-2014');
INSERT INTO PDAPPOINT VALUES('P003', 'D003', '01-APR-2014');
INSERT INTO PDAPPOINT VALUES('P004', 'D004', '16-JAN-2015');


CREATE TABLE MEDICINE
(
	MEDID CHAR(6) CONSTRAINT PK_MEDICINE PRIMARY KEY,
	NAME VARCHAR2(20),
	PHARMACEUTICALNAME VARCHAR2(20),
	AMOUNT CHAR(10),
	MANUFACTURER CHAR(10),
	SUMMARY VARCHAR2(200)
);
INSERT INTO MEDICINE(MEDID) VALUES('MED001');
INSERT INTO MEDICINE(MEDID) VALUES('MED002');
INSERT INTO MEDICINE(MEDID) VALUES('MED003');
INSERT INTO MEDICINE(MEDID) VALUES('MED004');	
INSERT INTO MEDICINE(MEDID) VALUES('MED005');

/* *************************** MED004 IS TOTALLY UNUSED ****************************************** */




CREATE TABLE PRES
(
	PRESID CHAR(7) CONSTRAINT PK_PRES PRIMARY KEY,
	MEDID CHAR(6),
	BEGINDATE DATE,
	DOSAGE CHAR(10),
	NUMBERTAKEN CHAR(10),
	CMNT VARCHAR2(100),
	DURATION CHAR(10)
);
ALTER TABLE PRES ADD CONSTRAINT FK_PRES FOREIGN KEY(MEDID) REFERENCES MEDICINE(MEDID);



INSERT INTO PRES(PRESID, MEDID, BEGINDATE) VALUES('PRES001', 'MED001', '16-MAR-2014');
INSERT INTO PRES(PRESID, MEDID, BEGINDATE) VALUES('PRES002', 'MED002', '17-MAR-2014');
INSERT INTO PRES(PRESID, MEDID, BEGINDATE) VALUES('PRES003', 'MED003', '06-MAR-2013');
INSERT INTO PRES(PRESID, MEDID, BEGINDATE) VALUES('PRES004', 'MED003', '16-MAR-2014');
INSERT INTO PRES(PRESID, MEDID, BEGINDATE) VALUES('PRES005', 'MED003', '16-MAR-1994');
INSERT INTO PRES(PRESID, MEDID, BEGINDATE) VALUES('PRES006', 'MED003', '16-JAN-2014');
INSERT INTO PRES(PRESID, MEDID, BEGINDATE) VALUES('PRES007', 'MED002', '16-JAN-2014');
INSERT INTO PRES(PRESID, MEDID, BEGINDATE) VALUES('PRES008', 'MED003', '17-JAN-2014');
INSERT INTO PRES(PRESID, MEDID, BEGINDATE) VALUES('PRES009', 'MED005', '16-JAN-2014');
INSERT INTO PRES(PRESID, MEDID, BEGINDATE) VALUES('PRES010', 'MED002', '01-JAN-2014');


CREATE TABLE DOCPRESCRIBES 
(
	PID CHAR(4),
	DID CHAR(4),
	PRESID CHAR(7)		
);
ALTER TABLE DOCPRESCRIBES ADD CONSTRAINT FK1_DOCPRESCRIBES FOREIGN KEY(PID) REFERENCES PATIENT(PID) ON DELETE SET NULL;
ALTER TABLE DOCPRESCRIBES ADD CONSTRAINT FK2_DOCPRESCRIBES FOREIGN KEY(DID) REFERENCES DOCTOR(DID) ON DELETE SET NULL;
ALTER TABLE DOCPRESCRIBES ADD CONSTRAINT FK3_DOCPRESCRIBES FOREIGN KEY(PRESID) REFERENCES PRES(PRESID) ON DELETE SET NULL;
ALTER TABLE DOCPRESCRIBES ADD CONSTRAINT PK_DOCPRESCRIBES PRIMARY KEY (PID,DID,PRESID);


INSERT INTO DOCPRESCRIBES VALUES('P001', 'D001', 'PRES001');
INSERT INTO DOCPRESCRIBES VALUES('P001', 'D001', 'PRES002');
INSERT INTO DOCPRESCRIBES VALUES('P001', 'D001', 'PRES003');
INSERT INTO DOCPRESCRIBES VALUES('P001', 'D002', 'PRES004');
INSERT INTO DOCPRESCRIBES VALUES('P002', 'D002', 'PRES005');
INSERT INTO DOCPRESCRIBES VALUES('P003', 'D003', 'PRES006');
INSERT INTO DOCPRESCRIBES VALUES('P004', 'D003', 'PRES007');
INSERT INTO DOCPRESCRIBES VALUES('P004', 'D003', 'PRES008');
INSERT INTO DOCPRESCRIBES VALUES('P005', 'D004', 'PRES009');
INSERT INTO DOCPRESCRIBES VALUES('P005', 'D005', 'PRES010');




CREATE TABLE NURSE
(
	NID CHAR(4) CONSTRAINT PK_NURSE PRIMARY KEY,
	NAME VARCHAR2(20),
	ADDRESS VARCHAR2(50),
	AGE NUMBER(3),
	PHONE VARCHAR2(15),
	STATUS CHAR(10),
	EMAIL VARCHAR2(30),
	QUALIFICATION VARCHAR2(50),
	SALARY NUMBER(8, 2)
);
INSERT INTO NURSE(NID) VALUES('N001');
INSERT INTO NURSE(NID) VALUES('N002');
INSERT INTO NURSE(NID) VALUES('N003');





CREATE TABLE BLOCK
(
	BLOCKID CHAR(8) CONSTRAINT PK_BLOCK PRIMARY KEY,
	BLOCKTYPE VARCHAR2(10),
	NAME VARCHAR2(20),
	NUMBEROFWARDS NUMBER(2)
);
INSERT INTO BLOCK(BLOCKID) VALUES('BLOCK001');
INSERT INTO BLOCK(BLOCKID) VALUES('BLOCK002');
INSERT INTO BLOCK(BLOCKID) VALUES('BLOCK003');


CREATE TABLE WARD
(
	WARDID CHAR(4) CONSTRAINT PK_WARD PRIMARY KEY,
	BLOCKID CHAR(8),
	WARDTYPE VARCHAR2(10),
	NAME VARCHAR2(20),
	NUMBEROFBEDS NUMBER(2)
);
ALTER TABLE WARD ADD CONSTRAINT FK_WARD FOREIGN KEY(BLOCKID) REFERENCES BLOCK(BLOCKID) ON DELETE SET NULL;

INSERT INTO WARD(WARDID, BLOCKID) VALUES('W001', 'BLOCK001');
INSERT INTO WARD(WARDID, BLOCKID) VALUES('W002', 'BLOCK001');
INSERT INTO WARD(WARDID, BLOCKID) VALUES('W003', 'BLOCK002');


CREATE TABLE BED
(
	BEDID CHAR(6) CONSTRAINT PK_BEDID PRIMARY KEY,
	WARDID CHAR(4),
	RENT NUMBER(6, 2),
	BEDTYPE VARCHAR2(15)
);
ALTER TABLE BED ADD CONSTRAINT FK_BED FOREIGN KEY(WARDID) REFERENCES WARD(WARDID);

INSERT INTO BED VALUES('BED001', 'W001', 100, 'NOT AVAILABLE');
INSERT INTO BED VALUES('BED002', 'W001', 100, 'NOT AVAILABLE');
INSERT INTO BED VALUES('BED003', 'W002', 500, 'AVAILABLE');
INSERT INTO BED VALUES('BED004', 'W002', 500, 'AVAILABLE');
INSERT INTO BED VALUES('BED005', 'W002', 500, 'AVAILABLE');

/* *************************** BED004 AND BED005 IS TOTALLY UNUSED ****************************************** */




CREATE TABLE PATIENTBED
(
	PID CHAR(4),
	BEDID CHAR(6),
	STARTDATE DATE,
	ENDDATE DATE
);
ALTER TABLE PATIENTBED ADD CONSTRAINT PK_PATIENTBED PRIMARY KEY(PID, BEDID, STARTDATE);
ALTER TABLE PATIENTBED ADD CONSTRAINT FK1_PATIENTBED FOREIGN KEY(PID) REFERENCES PATIENT(PID) ON DELETE SET NULL;
ALTER TABLE PATIENTBED ADD CONSTRAINT FK2_PATIENTBED FOREIGN KEY(BEDID) REFERENCES BED(BEDID) ON DELETE SET NULL;

INSERT INTO PATIENTBED(PID, BEDID, STARTDATE, ENDDATE) VALUES('P001', 'BED001', '16-MAR-2014', NULL);
INSERT INTO PATIENTBED(PID, BEDID, STARTDATE, ENDDATE) VALUES('P001', 'BED002', '14-MAR-2014', '16-MAR-2014');
INSERT INTO PATIENTBED(PID, BEDID, STARTDATE, ENDDATE) VALUES('P002', 'BED002', '16-MAR-2014', '20-MAR-2014');
INSERT INTO PATIENTBED(PID, BEDID, STARTDATE) VALUES('P002', 'BED002', '20-MAR-2014');



CREATE TABLE NURSESCHEDULE
(
	WARDID CHAR(4),
	NID CHAR(4),
	STARTDATE DATE,
	ENDDATE DATE
);
ALTER TABLE NURSESCHEDULE ADD CONSTRAINT FK1_NURSESCHEDULE FOREIGN KEY(WARDID) REFERENCES WARD(WARDID) ON DELETE SET NULL;
ALTER TABLE NURSESCHEDULE ADD CONSTRAINT FK2_NURSESCHEDULE FOREIGN KEY(NID) REFERENCES NURSE(NID) ON DELETE SET NULL;
ALTER TABLE NURSESCHEDULE ADD CONSTRAINT PK_NURSESCHEDULE PRIMARY KEY(WARDID, NID, STARTDATE);

INSERT INTO NURSESCHEDULE VALUES('W001', 'N001', '16-MAR-2014', NULL);
INSERT INTO NURSESCHEDULE VALUES('W001', 'N002', '16-MAR-2014', NULL);
INSERT INTO NURSESCHEDULE VALUES('W002', 'N002', '15-MAR-2014', NULL);


CREATE TABLE DOCSCHEDULE
(
	WARDID CHAR(4),
	DID CHAR(4),
	STARTDATE DATE,
	ENDDATE DATE
);
ALTER TABLE DOCSCHEDULE ADD CONSTRAINT FK1_DOCSCHEDULE FOREIGN KEY(WARDID) REFERENCES WARD(WARDID) ON DELETE SET NULL;
ALTER TABLE DOCSCHEDULE ADD CONSTRAINT FK2_DOCSCHEDULE FOREIGN KEY(DID) REFERENCES DOCTOR(DID) ON DELETE SET NULL;
ALTER TABLE DOCSCHEDULE ADD CONSTRAINT PK_DOCSCHEDULE PRIMARY KEY(WARDID, DID, STARTDATE);

INSERT INTO DOCSCHEDULE VALUES('W001', 'D001', '16-MAR-2014', NULL);
INSERT INTO DOCSCHEDULE VALUES('W001', 'D002', '16-MAR-2014', NULL);
INSERT INTO DOCSCHEDULE VALUES('W002', 'D002', '15-MAR-2014', NULL);



CREATE TABLE EMP
(
	EID CHAR(4) CONSTRAINT PK_EMP PRIMARY KEY,
	NAME VARCHAR2(20),
	ADDRESS VARCHAR2(50),
	PHONE VARCHAR2(7),
	AGE NUMBER(3),
	STATUS CHAR(10),
	EMAIL VARCHAR2(30),
	QUALIFICATION VARCHAR2(50),
	TYPE VARCHAR2(10),
	SALARY NUMBER(8, 2)
);
INSERT INTO EMP(EID) VALUES('E001');
INSERT INTO EMP(EID) VALUES('E002');
INSERT INTO EMP(EID) VALUES('E003');



CREATE TABLE WORKPLACE
(
	PLACEID CHAR(8) CONSTRAINT PK_WORKPLACE PRIMARY KEY,
	PFLOOR NUMBER(2),
	NAME VARCHAR2(20),
	BLOCKID CHAR(10),			
	ROOMNUMBER NUMBER(3) 
);
INSERT INTO WORKPLACE(PLACEID) VALUES('PLACE001');
INSERT INTO WORKPLACE(PLACEID) VALUES('PLACE002');
INSERT INTO WORKPLACE(PLACEID) VALUES('PLACE003');



CREATE TABLE EMPSCHEDULE
(
	PLACEID CHAR(8),
	EID CHAR(4),
	STARTDATE DATE,
	ENDDATE DATE
);
ALTER TABLE EMPSCHEDULE ADD CONSTRAINT FK1_EMPSCHEDULE FOREIGN KEY(PLACEID) REFERENCES WORKPLACE(PLACEID) ON DELETE SET NULL;
ALTER TABLE EMPSCHEDULE ADD CONSTRAINT FK2_EMPSCHEDULE FOREIGN KEY(EID) REFERENCES EMP(EID) ON DELETE SET NULL;
ALTER TABLE EMPSCHEDULE ADD CONSTRAINT PK_EMPSCHEDULE PRIMARY KEY(PLACEID, EID, STARTDATE);

INSERT INTO EMPSCHEDULE VALUES('PLACE001', 'E001', '16-MAR-2014', NULL);
INSERT INTO EMPSCHEDULE VALUES('PLACE001', 'E002', '16-MAR-2014', NULL);
INSERT INTO EMPSCHEDULE VALUES('PLACE002', 'E002', '15-MAR-2014', NULL);


CREATE TABLE LOGIN(
	USERNAME VARCHAR2(10) CONSTRAINT PK_PERSON PRIMARY KEY,
	PASSWORD VARCHAR2(12),
	TYPE VARCHAR2(10)
);

INSERT INTO LOGIN VALUES ('P001','P001','PATIENT');
INSERT INTO LOGIN VALUES ('P002','P002','PATIENT');
INSERT INTO LOGIN VALUES ('P003','P003','PATIENT');
INSERT INTO LOGIN VALUES ('P004','P004','PATIENT');
INSERT INTO LOGIN VALUES ('P005','P005','PATIENT');
INSERT INTO LOGIN VALUES ('D001','D001','DOCTOR');
INSERT INTO LOGIN VALUES ('D002','D002','DOCTOR');
INSERT INTO LOGIN VALUES ('D003','D003','DOCTOR');
INSERT INTO LOGIN VALUES ('D004','D004','DOCTOR');
INSERT INTO LOGIN VALUES ('D005','D005','DOCTOR');
INSERT INTO LOGIN VALUES ('N001','N001','NURSE');
INSERT INTO LOGIN VALUES ('N002','N002','NURSE');
INSERT INTO LOGIN VALUES ('E001','E001','ADMIN');
INSERT INTO LOGIN VALUES ('E002','E002','RCP');
INSERT INTO LOGIN VALUES ('E003','E003','RCP');
